<template>
	<div>
		<div v-infinite-scroll="loadNextPage" infinite-scroll-disabled="busy" infinite-scroll-distance="8">
			<div class="columns is-multiline">
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/1.jpg"
									lazy-srcset="/front/images/1.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>
								</figure>
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/2.jpg"
									lazy-srcset="/front/images/2.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>
								</figure>
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/1.jpg"
									lazy-srcset="/front/images/1.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>
								</figure>
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/2.jpg"
									lazy-srcset="/front/images/2.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>
								</figure>
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/1.jpg"
									lazy-srcset="/front/images/1.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>										
								</figure>						
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/2.jpg"
									lazy-srcset="/front/images/2.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>
								</figure>
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/1.jpg"
									lazy-srcset="/front/images/1.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>
								</figure>
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
				<div class="column is-3">
					<div class="card shadow-lg" data-aos="fade-up" data-aos-delay="500">
						<div class="card-image">
							<a href="blog/view">
								<figure class="image">
									<lazy-load
									src="/front/images/spinner.svg"
									lazy-src="/front/images/2.jpg"
									lazy-srcset="/front/images/2.jpg"
									background-color="transparent"
									alt="title"
									class="image-cover"
									/>
								</figure>
							</a>
						</div>
						<div class="card-content">
							<div class="content has-text-grey-light">
								<a href="blog/view">
									<h5>Dummy Text</h5>
								</a>
								<p class="has-text-grey-dark">Lorem ipsum leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non miy</p>
								<a href="blog/view" class="has-text-secondary has-text-left has-text-weight-bold">إقرأ المزيد  <i class="fa-regular fa-arrow-left has-text-gold mr-1"></i></a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="has-text-centered mt-6" v-show="loadMore">
			<a rel="noreferrer" class="news-loader" href="">
				<img src="/front/images/loader.svg" alt="">
			</a>
		</div>
	</div>
</template>
<script>
	import axios from 'axios';
	import infiniteScroll from 'vue-infinite-scroll';
	import LazyLoad from '../GeneralComponents/LazyLoad';
	export default {
		name: 'sub-categories',
		components: {
			LazyLoad ,
		},
		directives: {
			infiniteScroll
		},
		props: {
			data: {
				type: Array,
				default: () => []
			},
			url: String,
		},
		computed: {
			busy() {
				return this.fetching
			}
		},
		mounted() {
		},
		data: () => ({
			items: [],
			order : [],
			currentPage: 0,
			fetching: false,
			nextUrl : String,
			loadMore : true,
			isActive: false
		}),
		methods: {
			loadNextPage() {
				this.currentPage++;
				this.fetching = true;
				if(this.nextUrl != null){
					axios.get(this.nextUrl).then(({ data }) => {
						this.items.push(...data.data);
						if(data.links.next != null) {
							this.nextUrl = data.links.next;
						} else {
							this.nextUrl = data.links.next;
						}
						this.fetching = false;
					});
				}
				else{
					this.loadMore = false;
				}
			}
		},
		created() {
			this.nextUrl = this.url;
			this.items = [];
			this.loadNextPage();
		}
	};
</script>
